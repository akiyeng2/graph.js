/*! Graph.js 23-07-2014 Â© Amalan Iyengar 2014*/
var GraphPaper;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k){"undefined"==typeof a&&(a="black"),"undefined"==typeof b&&(b="black"),"undefined"==typeof c&&(c="black"),"undefined"==typeof d&&(d="black"),"undefined"==typeof e&&(e="red"),"undefined"==typeof f&&(f="black"),"undefined"==typeof g&&(g="#E6E6E6"),"undefined"==typeof h&&(h="lightgrey"),"undefined"==typeof i&&(i=3),"undefined"==typeof j&&(j=1),"undefined"==typeof k&&(k=2),this.stroke=a,this.fill=b,this.point=c,this.line=d,this.equation=e,this.axes=f,this.minorGridLines=g,this.majorGridLines=h,this.pointWidth=i,this.lineWidth=j,this.axisWidth=k}return a}();a.Styles=b}(GraphPaper||(GraphPaper={}));var GraphPaper;!function(a){var b=function(){function a(a){this.graph=a,this.scale()}return a.prototype.scale=function(){var a=this.graph,b=this.makeNice(a.xLength,!1)[0]*Math.pow(10,this.makeNice(a.xLength,!1)[1]),c=this.makeNice(a.yLength,!1)[0]*Math.pow(10,this.makeNice(a.yLength,!1)[1]),d=this.makeNice(b/(a.maxTicks-1),!0),e=this.makeNice(c/(a.maxTicks-1),!0);this._majorXScale=Number((d[0]*Math.pow(10,d[1])).toPrecision(1)),this._majorYScale=Number((e[0]*Math.pow(10,e[1])).toPrecision(1)),this._minorXScale=d[0]<5?.25*this._majorXScale:.2*this._majorXScale,this._minorYScale=e[0]<5?.25*this._majorYScale:.2*this._majorYScale,this._minorXScale=parseFloat(this._minorXScale.toPrecision(2)),this._minorYScale=parseFloat(this._minorYScale.toPrecision(2)),this._minorXMin=parseFloat((Math.floor(a.xMin/this._minorXScale)*this._minorXScale).toPrecision(21)),this._minorXMax=parseFloat((Math.ceil(a.xMax/this._minorXScale)*this._minorXScale).toPrecision(21)),this._majorXMin=parseFloat((Math.floor(a.xMin/this._majorXScale)*this._majorXScale).toPrecision(21)),this._majorXMax=parseFloat((Math.ceil(a.xMax/this._majorXScale)*this._majorXScale).toPrecision(21)),this._minorYMin=parseFloat((Math.floor(a.yMin/this._minorYScale)*this._minorYScale).toPrecision(21)),this._minorYMax=parseFloat((Math.ceil(a.yMax/this._minorYScale)*this._minorYScale).toPrecision(21)),this._majorYMin=parseFloat((Math.floor(a.yMin/this._majorYScale)*this._majorYScale).toPrecision(21)),this._majorYMax=parseFloat((Math.ceil(a.yMax/this._majorYScale)*this._majorYScale).toPrecision(21))},a.prototype.makeNice=function(a,b){var c,d=Math.floor(Math.log(a)/Math.log(10)),e=a/Math.pow(10,d);return c=b?1.5>e?1:3>e?2:7>e?5:10:1>=e?1:2>=e?2:5>=e?5:10,[c,d]},Object.defineProperty(a.prototype,"minorXScale",{get:function(){return this._minorXScale},set:function(a){this._minorXScale=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"majorXScale",{get:function(){return this._majorXScale},set:function(a){this._majorXScale=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minorYScale",{get:function(){return this._minorYScale},set:function(a){this._minorYScale=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"majorYScale",{get:function(){return this._majorYScale},set:function(a){this._majorYScale=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minorXMax",{get:function(){return this._majorXMax},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minorXMin",{get:function(){return this._majorXMin},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minorYMax",{get:function(){return this._majorYMax},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minorYMin",{get:function(){return this._majorYMin},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"majorXMax",{get:function(){return this._majorXMax},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"majorXMin",{get:function(){return this._majorXMin},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"majorYMax",{get:function(){return this._majorYMax},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"majorYMin",{get:function(){return this._majorYMin},enumerable:!0,configurable:!0}),a}();a.Scale=b}(GraphPaper||(GraphPaper={}));var GraphPaper;!function(a){!function(a){var b=function(){function a(a,b,c,d){"undefined"==typeof c&&(c="black"),"undefined"==typeof d&&(d=1),this._graphs=[],this._point1=a,this._point2=b,this._color=c,this._width=d,this._graphs=[]}return a.prototype.draw=function(a){a.context.strokeStyle=this.color,a.context.lineWidth=this.width;var b=this.point1.toCanvas(a),c=this.point2.toCanvas(a);if(b.x===c.x){a.context.fillStyle=this.color;var d=b.x;d-=Math.floor(this.width/2),a.context.fillRect(d,b.y,this.width,c.y-b.y)}else if(b.y===c.y){a.context.fillStyle=this.color;var e=c.y;e-=Math.floor(this.width/2),a.context.fillRect(b.x,e,c.x-b.x,this.width)}else a.context.beginPath(),a.context.moveTo(b.x,b.y),a.context.lineTo(c.x,c.y),a.context.stroke()},a.prototype.updateGraphs=function(){for(var a=0;a<this._graphs.length;a++)this._graphs[a].update()},a.prototype.add=function(a){this._graphs.push(a)},a.prototype.remove=function(a){for(var b=this._graphs.length-1;b>=0;b--)this._graphs[b]===a&&this._graphs.splice(b,1)},a.prototype.equals=function(a){return this.point1.equals(a.point1)&&this.point2.equals(a.point2)&&this.color.valueOf()===a.color.valueOf()&&this.width===a.width},Object.defineProperty(a.prototype,"point1",{get:function(){return this._point1},set:function(a){this._point1=a,this.updateGraphs()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"point2",{get:function(){return this._point2},set:function(a){this._point2=a,this.updateGraphs()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"color",{get:function(){return this._color},set:function(a){this._color=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this._width},set:function(a){this._width=a,this.updateGraphs()},enumerable:!0,configurable:!0}),a}();a.Line=b}(a.Shapes||(a.Shapes={}));a.Shapes}(GraphPaper||(GraphPaper={}));var GraphPaper;!function(a){!function(a){var b=function(){function a(a,b,c,d,e,f){"undefined"==typeof c&&(c="start"),"undefined"==typeof d&&(d=!1),"undefined"==typeof e&&(e="black"),"undefined"==typeof f&&(f="10px sans-serif"),this._point=a,this._text=b,this._align=c,this._centered=d,this._color=e,this._font=f,this._graphs=[]}return a.prototype.draw=function(a){var b=this._point.toCanvas(a);this._centered&&(b.x-=Math.floor(a.context.measureText(this._text).width/2),b.y-=Math.floor(a.context.measureText("o").width/2)),a.context.textAlign=this._align,a.context.font=this._font,a.context.fillStyle=this._color,a.context.fillText(this._text,b.x,b.y)},a.prototype.updateGraphs=function(){for(var a=0;a<this._graphs.length;a++)this._graphs[a].update()},a.prototype.add=function(a){this._graphs.push(a)},a.prototype.remove=function(a){for(var b=this._graphs.length-1;b>=0;b--)this._graphs[b]===a&&this._graphs.splice(b,1)},a.prototype.equals=function(a){return this._point.equals(a.point)&&this._text.valueOf()===a.text.valueOf()&&this._align.valueOf()===a.align.valueOf()&&this._centered===a.centered&&this._color.valueOf()===a.color.valueOf()&&this._font.valueOf()===a.font.valueOf()},a.prototype.toString=function(){return this._text+" "+this._point.toString()},Object.defineProperty(a.prototype,"point",{get:function(){return this._point},set:function(a){this._point=a,this.updateGraphs()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"text",{get:function(){return this._text},set:function(a){this._text=a,this.updateGraphs()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"align",{get:function(){return this._align},set:function(a){this._align=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"centered",{get:function(){return this._centered},set:function(a){this._centered=a,this.updateGraphs()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"color",{get:function(){return this._color},set:function(a){this._color=a,this.updateGraphs()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"font",{get:function(){return this._font},set:function(a){this._font=a,this.updateGraphs()},enumerable:!0,configurable:!0}),a}();a.Label=b}(a.Shapes||(a.Shapes={}));a.Shapes}(GraphPaper||(GraphPaper={}));var GraphPaper;!function(a){!function(b){var c=a.Shapes.Line,d=function(){function b(a,b){"undefined"==typeof b&&(b="red"),this._eqn=a,this._equation=new Equation(a),this.f=this._equation.compile(),this._color=b,this._graphs=[]}return b.prototype.draw=function(b){for(var d=b.xMin;d<b.xMax;d+=b.xResolution){var e=d-b.xResolution,f=this.f(e),g=new c(new a.Shapes.Point(e,f),new a.Shapes.Point(d,this.f(d)),this.color);g.draw(b)}},b.prototype.updateGraphs=function(){for(var a=0;a<this._graphs.length;a++)this._graphs[a].update()},b.prototype.equals=function(a){return this.eqn===a.eqn&&this.color===a.color},b.prototype.toString=function(){return this._eqn},b.prototype.add=function(a){this._graphs.push(a)},b.prototype.remove=function(a){for(var b=this._graphs.length-1;b>=0;b--)this._graphs[b]===a&&this._graphs.splice(b,1)},Object.defineProperty(b.prototype,"eqn",{get:function(){return this._eqn},set:function(a){this.f=new Equation(a).compile(),this.updateGraphs()},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"color",{get:function(){return this._color},set:function(a){this._color=a,this.updateGraphs()},enumerable:!0,configurable:!0}),b}();b.Expression=d}(a.Shapes||(a.Shapes={}));a.Shapes}(GraphPaper||(GraphPaper={}));var GraphPaper;!function(a){!function(a){var b=function(){function a(a,b,c,d){"undefined"==typeof c&&(c="black"),"undefined"==typeof d&&(d=3),this._x=a,this._y=b,this._color=c,this._width=d,this._graphs=[]}return a.prototype.draw=function(a){var b=this.toCanvas(a);a.context.fillStyle=this._color,a.context.beginPath(),a.context.arc(b.x,b.y,this.width,0,2*Math.PI,!0),a.context.closePath(),a.context.fill()},a.prototype.updateGraphs=function(){for(var a=0;a<this._graphs.length;a++)this._graphs[a].update()},a.prototype.add=function(a){this._graphs.push(a)},a.prototype.remove=function(a){for(var b=this._graphs.length-1;b>=0;b--)this._graphs[b]===a&&this._graphs.splice(b,1)},a.prototype.toCanvas=function(a){var b=-a.xMin*a.width/a.xLength,c=a.height+a.yMin*a.height/a.yLength,d=b+this._x*(a.width/a.xLength),e=c-this._y*(a.height/a.yLength);return{x:d,y:e}},a.prototype.equals=function(a){return this.x===a.x&&this.y===a.y&&this.color.valueOf()===a.color.valueOf()&&this.width===a.width},a.prototype.toString=function(){return"("+this.x+", "+this.y+")"},Object.defineProperty(a.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this.updateGraphs()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this.updateGraphs()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"color",{get:function(){return this._color},set:function(a){this._color=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this._width},set:function(a){this._width=a,this.updateGraphs()},enumerable:!0,configurable:!0}),a}();a.Point=b}(a.Shapes||(a.Shapes={}));a.Shapes}(GraphPaper||(GraphPaper={}));var GraphPaper;!function(a){var b=a.Scale,c=a.Shapes.Point,d=a.Shapes.Line,e=a.Shapes.Label,f=a.Shapes.Expression,g=function(){function g(c,d,e,f,g,h,i,j,k){"undefined"==typeof d&&(d=-10),"undefined"==typeof e&&(e=10),"undefined"==typeof f&&(f=-10),"undefined"==typeof g&&(g=10),"undefined"==typeof h&&(h=!0),"undefined"==typeof i&&(i=!0),"undefined"==typeof j&&(j=!0),"undefined"==typeof k&&(k=new a.Styles),this._maxTicks=10,this.mouseDown=!1,this.xZoom=!0,this.yZoom=!0,this._context=c.getContext("2d"),this.style=k,this._height=c.height,this._width=c.width,this._xMin=d,this._xMax=e,this._yMin=f,this._yMax=g,this._axes=h,this._gridLines=i,this._tabs=j,this._scale=new b(this),this._shapes=[],this.drag(),this.zoom(),this.interpolate(),this.update()}return g.prototype.interpolate=function(){var a=this,b=this.context.canvas;$(b).mousemove(function(b){a.update();var d=b.pageX-$(this).parent().offset().left,f=new c(0,0).toCanvas(a);d=(d-f.x)*a.xResolution;var g=a._trace;if("undefined"!=typeof g){var h=g.f(d);new c(d,h,g.color,3).draw(a);var i=new e(new c(a._xMin,a._yMin),"("+d+", "+h+")");a.context.textBaseline="bottom",i.color=g.color,i.draw(a),a.context.textBaseline="alphabetic"}})},g.prototype.add=function(a){this._shapes.push(a),a.add(this),a instanceof f&&(this.trace=a),this.update()},g.prototype.remove=function(a){for(var b=this._shapes.length-1;b>=0;b--)this._shapes[b].equals(a)&&this._shapes.splice(b,1);a.remove(this),this.update()},g.prototype.update=function(a){if("undefined"==typeof a&&(a=!0),this._context.clearRect(0,0,this._context.canvas.width,this._context.canvas.height),a){if(this._xLength=this._xMax-this._xMin,this._yLength=this._yMax-this._yMin,this._xLength<=0)throw"xMax must be greater than or equal to xMin";if(this._yLength<=0)throw"yMax must be greater than or equal to yMin";this._scale.scale()}this._gridLines&&this.drawGridlines(),this._axes&&this.drawAxes(),this._tabs&&this.drawTabs(),this.drawLabels();var b=this;this._shapes.forEach(function(a){a.draw(b)})},g.prototype.drag=function(){var a,b,c=this._context,d=this,e=c.canvas,f=$(e).offset();$(e).mousedown(function(c){d.mouseDown=!0,a=c.pageX-f.left,b=c.pageY-f.top}),$(document).mouseup(function(){d.mouseDown=!1}),$(e).mousemove(function(c){if(d.mouseDown){var e=c.pageX-f.left,g=c.pageY-f.top,h=Number(((e-a)*d.xResolution).toPrecision(1)),i=Number(((g-b)*d.yResolution).toPrecision(1)),j=d.xMin-h,k=d.xMax-h,l=d.yMin+i,m=d.yMax+i;d.setWindow(j,k,l,m),a=e,b=g}})},g.prototype.zoom=function(){var a=this,b=this.context.canvas;$(b).mousewheel(function(b){b.preventDefault(),b.stopPropagation();var d=$(this).parent().offset(),e=b.pageX-d.left,f=b.pageY-d.top,g=b.deltaY*b.deltaFactor,h=1+g/1e3,i=new c(0,0).toCanvas(a),j=(e-i.x)*a.xResolution,k=(f-i.y)*a.yResolution,l=a.xZoom?Number(((a.xMin-j)*h+j).toPrecision(21)):a.xMin,m=a.xZoom?Number(((a.xMax-j)*h+j).toPrecision(21)):a.xMax,n=a.yZoom?Number(((a.yMin+k)*h-k).toPrecision(21)):a.yMin,o=a.yZoom?Number(((a.yMax+k)*h-k).toPrecision(21)):a.yMax;a.setWindow(l,m,n,o)})},g.prototype.drawAxes=function(){var a=new d(new c(this._xMin,0),new c(this._xMax,0),this.style.axes,this.style.axisWidth),b=new d(new c(0,this._yMin),new c(0,this._yMax),this.style.axes,this.style.axisWidth);a.draw(this),b.draw(this)},g.prototype.drawGridlines=function(){var a,b,e,f=this._scale.minorXScale,g=this._scale.minorYScale,h=this.style.minorGridLines;for(a=this._scale.minorXMin;a<this._scale.minorXMax;a+=f)e=new d(new c(a,this._yMin),new c(a,this._yMax),h),e.draw(this);for(b=this._scale.minorYMin;b<this._scale.minorYMax;b+=g)e=new d(new c(this._xMin,b),new c(this._xMax,b),h),e.draw(this);for(f=this._scale.majorXScale,g=this._scale.majorYScale,h=this.style.majorGridLines,a=this._scale.majorXMin;a<this._scale.majorXMax;a+=f)e=new d(new c(a,this._yMin),new c(a,this._yMax),h),e.draw(this);for(b=this._scale.majorYMin;b<this._scale.majorYMax;b+=g)e=new d(new c(this._xMin,b),new c(this._xMax,b),h),e.draw(this)},g.prototype.drawTabs=function(){this._context.strokeStyle=this.style.axes;var a=8*this.xResolution,b=8*this.yResolution,e=4*this.xResolution,f=4*this.yResolution;this.style.lineWidth=1;var g,h,i,j=this._scale.minorXScale,k=this._scale.minorYScale;for(h=this._scale.minorXMin;h<this._scale.minorXMax;h+=j)g=new d(new c(h,-f),new c(h,f),this.style.axes),g.draw(this);for(i=this._scale.minorYMin;i<this._scale.minorYMax;i+=k)g=new d(new c(-e,i),new c(e,i),this.style.axes),g.draw(this);for(j=this._scale.majorXScale,k=this._scale.majorYScale,h=this._scale.majorXMin;h<this._scale.majorXMax;h+=j)g=new d(new c(h,-b),new c(h,b),this.style.axes),g.draw(this);for(i=this._scale.majorYMin;i<this._scale.majorYMax;i+=k)g=new d(new c(-a,i),new c(a,i),this.style.axes),g.draw(this)},g.prototype.drawLabels=function(){var a,b,d,f=this._scale.majorXScale,g=20;for(b=this._scale.majorXMin;b<this._scale.majorXMax;b+=f)Math.abs(b)>f/2&&(a=this.yMin>0?new c(b,this.yMin+g*this.yResolution):this.yMax<0?new c(b,this.yMax-g*this.yResolution):f<-this.yMin?new c(b,-this.yResolution*g):new c(b,this.yResolution*g),d=parseFloat(b.toPrecision(8)).toString(),Math.log(Math.abs(b))/Math.log(10)>5&&(d=b.toExponential()),new e(a,d,"start",!0).draw(this));var h=this._scale.majorYScale;for(this.context.textAlign="end",g=15,b=this._scale.majorYMin;b<this._scale.majorYMax;b+=h){var i="right";Math.abs(b)>h/2&&(this.xMin>0?(a=new c(this.xMin+g*this.xResolution,b-5*this.yResolution),i="left"):this.xMax<0?a=new c(this.xMax-g*this.xResolution,b-5*this.yResolution):h<-this.xMin?a=new c(-this.yResolution*g,b-5*this.yResolution):(a=new c(this.yResolution*g,b-5*this.yResolution),i="left"),d=parseFloat(b.toPrecision(8)).toString(),Math.log(Math.abs(b))/Math.log(10)>5&&(d=b.toExponential()),new e(a,d,i).draw(this))}},Object.defineProperty(g.prototype,"xMin",{get:function(){return this._xMin},set:function(a){this._xMin=a,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"xMax",{get:function(){return this._xMax},set:function(a){this._xMax=a,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"yMin",{get:function(){return this._yMin},set:function(a){this._yMin=a,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"yMax",{get:function(){return this._yMax},set:function(a){this._yMax=a,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"xLength",{get:function(){return this._xLength},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"yLength",{get:function(){return this._yLength},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"majorXScale",{get:function(){return this._scale.majorXScale},set:function(a){this._scale.majorXScale=a,this.update(!1)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"minorXScale",{get:function(){return this._scale.minorXScale},set:function(a){this._scale.minorXScale=a,this.update(!1)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"majorYScale",{get:function(){return this._scale.majorYScale},set:function(a){this._scale.majorYScale=a,this.update(!1)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"minorYScale",{get:function(){return this._scale.minorYScale},set:function(a){this._scale.minorXScale=a,this.update(!1)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"maxTicks",{get:function(){return this._maxTicks},set:function(a){this._maxTicks=a,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"xResolution",{get:function(){return this._xLength/this._width},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"yResolution",{get:function(){return this._yLength/this.height},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"trace",{get:function(){return this._trace},set:function(a){this._trace=a},enumerable:!0,configurable:!0}),g.prototype.setWindow=function(a,b,c,d){"undefined"==typeof a&&(a=-10),"undefined"==typeof b&&(b=10),"undefined"==typeof c&&(c=-10),"undefined"==typeof d&&(d=10),this._xMin=a,this._xMax=b,this._yMin=c,this._yMax=d,this.update()},g}();a.Graph=g}(GraphPaper||(GraphPaper={}));